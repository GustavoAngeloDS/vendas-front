<div class="d-flex justify-content-between" id="main-content">
  <h1>Pedidos</h1>
  <button
  class="btn btn-success d-flex align-items-center"
  (click)="newOrder()"
  >
  <i class="fa fa-plus" style="margin-right: 5px"></i>Adicionar
</button>
</div>

<fieldset class="form-inline">
  <div class="form-group">
    <label for="typeahead-http">Buscar pedidos</label>
    <input name="name" id="typeahead-http" type="text" class="form-control mx-sm-3" [class.is-invalid]="notFound" (selectItem)="selectedClient($event)" [(ngModel)]="clients" [ngbTypeahead]="search" [resultFormatter]="clientFormat" [inputFormatter]="clientFormat" placeholder="Nome ou CPF" />
    <small *ngIf="searching" class="form-text text-muted">...</small>
    <button type="button" class="btn-close" aria-label="Close" *ngIf="clients" (click)="getAllOrders()"></button>
    <div class="invalid-feedback" *ngIf="notFound">Cliente não encontrado.</div>
  </div>
</fieldset>
<br>
<table class="table table-striped">
  <thead>
    <tr>
      <th scope="col" [appSort]="orders" data-order="desc" data-name="id">
        ID
      </th>
      <th
        scope="col"
        [appSort]="orders"
        data-order="desc"
        data-name="cliente"
      >
        Cliente
      </th>
      <th
        scope="col"
        [appSort]="orders"
        data-order="desc"
        data-name="clienteCpf"
      >
        CPF
      </th>
      <th
        scope="col"
        [appSort]="orders"
        data-order="desc"
        data-name="date"
      >
        Data do Pedido
      </th>
      <th>Qtde. Produtos</th>
      <th class="text-center">Opções ...</th>
    </tr>
  </thead>
  <tbody class="align-middle">
    <tr *ngFor="let order of orders">
      <td scope="row">{{ order.id }}</td>
      <td scope="row">{{ order.client!.name }}</td>
      <td scope="row">{{ order.client!.cpf }}</td>
      <td scope="row">{{ order.date }}</td>
      <td scope="row">{{ orderItemQuantity(order.items) }}</td>
      <td scope="row" class="text-center">
        <button class="btn btn-xs btn-info" (click)="editOrder(order)">
          <i class="fa fa-edit" aria-hidden="true"></i> Editar
        </button>
        <a
          class="btn btn-xs btn-danger"
          (click)="deleteOrder($event, order)"
          ><i class="fa fa-times" aria-hidden="true"></i> Excluir</a
        >
      </td>
    </tr>
  </tbody>
</table>

<div class="alert alert-danger" *ngIf="!orders || orders?.length == 0">
  Nenhum pedido encontrado!
</div>


